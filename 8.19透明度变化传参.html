<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			#a{
				background: red;
				width: 10vw;
				height: 10vw;
				position: absolute;
			}
			#b{
				background: teal;
				width: 50vw;
				height: 60vw;
				position: relative;
			}
		</style>
	</head>
	<body>
		<div id="b">
			<div id="a"></div>
		</div>
		<script type="text/javascript">
			let oDiv=document.getElementById("a")
			let oDiv2=document.getElementById("b")
			// 鼠标按住功能
			oDiv.onmousedown=function (e) {
				let distX=e.clientX-oDiv.offsetLeft
				let distY=e.clientY-oDiv.offsetTop
				document.onmousemove=function (e) {
					let newX=e.clientX-distX
					let newY=e.clientY-distY
					// newX是方块左边距离左侧边界距离
					let maxLeft=oDiv2.offsetWidth-oDiv.offsetWidth
					let maxTop=oDiv2.offsetHeight-oDiv.offsetHeight
					// 限定上边界
					if (newX<0) {
						newX=0
					}
					// 限定下边界
					if (newY<0) {
						newY=0
					}
					if (newX>maxLeft) {
						newX=maxLeft
					}
					if (newY>maxTop) {
						newY=maxTop
					}
					// 拖拽运动
					oDiv.style.left=newX+'px'
					oDiv.style.top=newY+'px'
					
				}
			}
			
			

			// 鼠标松开功能
			document.onmouseup=function () {
				document.onmousemove=null
				// return false
			}
		</script>
	</body>
</html>
